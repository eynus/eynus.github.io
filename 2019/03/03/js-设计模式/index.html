<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" type="image/x-icon" href="favicon.ico"><meta name="author" content="Eynus."><link rel="alternative" href="/atom.xml" title="I am Eynus." type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>js-设计模式 - I am Eynus.</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">I am Eynus.</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">カタログ/（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2019-03-02T16:40:15.000Z">March 3, 2019</time><h1 class="post__title"><a href="/2019/03/03/js-设计模式/">js-设计模式</a></h1><div class="post__main echo"><h1 id="1-构造器模式-创建类模式"><a href="#1-构造器模式-创建类模式" class="headerlink" title="1.构造器模式-创建类模式"></a>1.构造器模式-创建类模式</h1><p>1.javascript ES5及之前——缺少类,—&gt;构造器，方法在构造器里</p>
<p>2.ES6 有class,constructor, 但是new的方式一样   内部有this.变量   方法在构造函数外面没有this</p>
<h6 id="参考示例-ES5"><a href="#参考示例-ES5" class="headerlink" title="参考示例 - ES5"></a>参考示例 - ES5</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, gender, score</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.gender = gender;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.score = score;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.quality = <span class="number">100</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.sumScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.score + <span class="keyword">this</span>.quality;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> whh = <span class="keyword">new</span> Student(<span class="string">'王花花'</span>, <span class="string">'男'</span>, <span class="number">89</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> lsd = <span class="keyword">new</span> Student(<span class="string">'李拴蛋'</span>, <span class="string">'女'</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(whh.name, whh.sumScore())</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(lsd.name, lsd.sumScore())</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="参考示例-ES6"><a href="#参考示例-ES6" class="headerlink" title="参考示例 - ES6"></a>参考示例 - ES6</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">constructor</span>(name, gender, score) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.gender = gender;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.score = score;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.quality = <span class="number">100</span>;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    sumScore() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.score + <span class="keyword">this</span>.quality;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> whh = <span class="keyword">new</span> Student(<span class="string">'王花花'</span>, <span class="string">'男'</span>, <span class="number">89</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> lsd = <span class="keyword">new</span> Student(<span class="string">'李拴蛋'</span>, <span class="string">'女'</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  whh.score = 100;</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(whh.name, whh.sumScore())</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(lsd.name, lsd.sumScore())</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h1 id="2-原型模式-创建类模式"><a href="#2-原型模式-创建类模式" class="headerlink" title="2.原型模式-创建类模式"></a>2.原型模式-创建类模式</h1><h3 id="单纯地创建一个用于生成学生对象的对象函数"><a href="#单纯地创建一个用于生成学生对象的对象函数" class="headerlink" title="单纯地创建一个用于生成学生对象的对象函数"></a>单纯地创建一个用于生成学生对象的对象函数</h3><p><strong>原型模式怎么用：需要创建重复的一类对象的时候</strong></p>
<p>JS语言特性决定了他有这样的一个行为方式(算是对上面构造模式里面方法的优化节省资源)</p>
<h6 id="参考示例"><a href="#参考示例" class="headerlink" title="参考示例"></a>参考示例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, gender, score</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.gender = gender;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.score = score;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.qulity = <span class="number">100</span>;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  Student.prototype.sumScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="keyword">this</span>.score + <span class="keyword">this</span>.qulity;</span></span><br><span class="line"><span class="undefined">  &#125;;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> whh = <span class="keyword">new</span> Student(<span class="string">'王花花'</span>, <span class="string">'男'</span>, <span class="number">89</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> lsd = <span class="keyword">new</span> Student(<span class="string">'李拴蛋'</span>, <span class="string">'女'</span>, <span class="number">40</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(whh.name, whh.sumScore());</span></span><br><span class="line"><span class="javascript">  <span class="built_in">console</span>.log(lsd.name, lsd.sumScore());</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-原型模式的应用-创造类模式"><a href="#3-原型模式的应用-创造类模式" class="headerlink" title="3.原型模式的应用-创造类模式"></a>3.原型模式的应用-创造类模式</h5><h6 id="参考示例-1"><a href="#参考示例-1" class="headerlink" title="参考示例"></a>参考示例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"roster"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> rootElement = <span class="built_in">document</span>.getElementById(<span class="string">'roster'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, gender, score</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.gender = gender;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.score = score;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.quality = <span class="number">100</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.mount();</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  Student.prototype.sumScore = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="keyword">this</span>.score + <span class="keyword">this</span>.quality;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  /**</span></span><br><span class="line"><span class="undefined">   * 将数据转换为HTML并插入到表格中</span></span><br><span class="line"><span class="undefined">   */</span></span><br><span class="line"><span class="javascript">  Student.prototype.mount = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> tr = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>);</span></span><br><span class="line"><span class="undefined">    tr.innerHTML =</span></span><br><span class="line"><span class="javascript">      <span class="string">'&lt;td&gt;'</span> + <span class="keyword">this</span>.name + <span class="string">'&lt;/td&gt;'</span> +</span></span><br><span class="line"><span class="javascript">      <span class="string">'&lt;td&gt;'</span> + <span class="keyword">this</span>.gender + <span class="string">'&lt;/td&gt;'</span> +</span></span><br><span class="line"><span class="javascript">      <span class="string">'&lt;td&gt;'</span> + <span class="keyword">this</span>.score + <span class="string">'&lt;/td&gt;'</span> +</span></span><br><span class="line"><span class="javascript">      <span class="string">'&lt;td&gt;'</span> + <span class="keyword">this</span>.quality + <span class="string">'&lt;/td&gt;'</span> +</span></span><br><span class="line"><span class="javascript">      <span class="string">'&lt;td&gt;'</span> + <span class="keyword">this</span>.sumScore() + <span class="string">'&lt;/td&gt;'</span></span></span><br><span class="line"><span class="undefined">    ;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    rootElement.appendChild(tr);</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> whh = <span class="keyword">new</span> Student(<span class="string">'王花花'</span>, <span class="string">'男'</span>, <span class="number">98</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> lsd = <span class="keyword">new</span> Student(<span class="string">'李拴蛋'</span>, <span class="string">'女'</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="4-原型模式的应用-ES6-创建类模式"><a href="#4-原型模式的应用-ES6-创建类模式" class="headerlink" title="4.原型模式的应用-ES6-创建类模式"></a>4.原型模式的应用-ES6-创建类模式</h5><h6 id="参考示例-2"><a href="#参考示例-2" class="headerlink" title="参考示例"></a>参考示例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">id</span>=<span class="string">"roster"</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> rootElement = <span class="built_in">document</span>.getElementById(<span class="string">'roster'</span>);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">constructor</span>(name, gender, score) &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.name = name;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.gender = gender;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.score = score;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.quality = <span class="number">100</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">      <span class="keyword">this</span>.mount();</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    /*</span></span><br><span class="line"><span class="undefined">    * 计算总分</span></span><br><span class="line"><span class="undefined">    * */</span></span><br><span class="line"><span class="undefined">    sumScore() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">return</span> <span class="keyword">this</span>.score + <span class="keyword">this</span>.quality;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    /**</span></span><br><span class="line"><span class="undefined">     * 将数据转换为HTML并插入到表格中</span></span><br><span class="line"><span class="undefined">     */</span></span><br><span class="line"><span class="undefined">    mount() &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">const</span> tr = <span class="built_in">document</span>.createElement(<span class="string">'tr'</span>);</span></span><br><span class="line"><span class="undefined">      tr.innerHTML = `</span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;this.name&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;this.gender&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;this.score&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">            <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;this.quality&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">td</span>&gt;</span>$&#123;this.sumScore()&#125;<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span></span><br><span class="line"><span class="undefined">      `;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      ;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      rootElement.appendChild(tr);</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">  &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> whh = <span class="keyword">new</span> Student(<span class="string">'王花花'</span>, <span class="string">'男'</span>, <span class="number">98</span>);</span></span><br><span class="line"><span class="javascript">  <span class="keyword">const</span> lsd = <span class="keyword">new</span> Student(<span class="string">'李拴蛋'</span>, <span class="string">'女'</span>, <span class="number">50</span>);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="5-实战前你需要知道的-原型模式实战"><a href="#5-实战前你需要知道的-原型模式实战" class="headerlink" title="5.实战前你需要知道的-原型模式实战"></a>5.实战前你需要知道的-原型模式实战</h5><h5 id="6-一把梭编程法-背背山中学花名册-原型模式实战"><a href="#6-一把梭编程法-背背山中学花名册-原型模式实战" class="headerlink" title="6.一把梭编程法-背背山中学花名册-原型模式实战"></a>6.一把梭编程法-背背山中学花名册-原型模式实战</h5><h5 id="7-将数据归纳成对象-背背山中学花名册-原型模式实战"><a href="#7-将数据归纳成对象-背背山中学花名册-原型模式实战" class="headerlink" title="7.将数据归纳成对象-背背山中学花名册-原型模式实战"></a>7.将数据归纳成对象-背背山中学花名册-原型模式实战</h5><h5 id="8-将视图归纳成对象-实现表单对象-背背山花名册-原型模式实战"><a href="#8-将视图归纳成对象-实现表单对象-背背山花名册-原型模式实战" class="headerlink" title="8.将视图归纳成对象-实现表单对象-背背山花名册 -原型模式实战"></a>8.将视图归纳成对象-实现表单对象-背背山花名册 -原型模式实战</h5><h1 id="9-构建者模式-创建类模式"><a href="#9-构建者模式-创建类模式" class="headerlink" title="9.构建者模式-创建类模式"></a>9.构建者模式-创建类模式</h1><h3 id="“传入数据之前验证是否合格”"><a href="#“传入数据之前验证是否合格”" class="headerlink" title="“传入数据之前验证是否合格”"></a>“传入数据之前验证是否合格”</h3><p><strong>在数据存入对象之前，判断一下是否符合标准，嵌套一个构造器来实现判断</strong></p>
<h6 id="代码示例"><a href="#代码示例" class="headerlink" title="代码示例"></a>代码示例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="comment">//(已转化为原型模式，即方法放到原型，开销更小)</span></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> studentCount = <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="function"><span class="keyword">function</span> <span class="title">StudentBuilder</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.student = <span class="keyword">new</span> Student();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript">StudentBuilder.prototype.setName = <span class="function"><span class="keyword">function</span> (<span class="params">name</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.student.name = name;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">StudentBuilder.prototype.setGender = <span class="function"><span class="keyword">function</span> (<span class="params">gender</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (gender != <span class="string">'男'</span> &amp;&amp; gender != <span class="string">'女'</span>)</span></span><br><span class="line"><span class="javascript">        <span class="keyword">throw</span> <span class="string">'好玩不'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.student.gender = gender;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">StudentBuilder.prototype.setHairLength = <span class="function"><span class="keyword">function</span> (<span class="params">hairLength</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span> (</span></span><br><span class="line"><span class="javascript">        (<span class="keyword">this</span>.student.gender == <span class="string">'男'</span> &amp;&amp; hairLength &gt; <span class="number">1</span>) ||</span></span><br><span class="line"><span class="javascript">        (<span class="keyword">this</span>.student.gender == <span class="string">'女'</span> &amp;&amp; hairLength &gt; <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">    ) <span class="keyword">throw</span> <span class="string">'回去剪头'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">this</span>.student.hairLength = hairLength;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">StudentBuilder.prototype.build = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="undefined">    studentCount++;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(studentCount);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> <span class="keyword">this</span>.student;</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> builder = <span class="keyword">new</span> StudentBuilder();</span></span><br><span class="line"><span class="javascript">builder.setName(<span class="string">'王花花'</span>);</span></span><br><span class="line"><span class="javascript">builder.setGender(<span class="string">'男'</span>);</span></span><br><span class="line"><span class="undefined">builder.setHairLength(1);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> whh = builder.build();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> builder2 = <span class="keyword">new</span> StudentBuilder();</span></span><br><span class="line"><span class="javascript">builder2.setName(<span class="string">'李拴蛋'</span>);</span></span><br><span class="line"><span class="javascript">builder2.setGender(<span class="string">'女'</span>);</span></span><br><span class="line"><span class="undefined">builder2.setHairLength(20);</span></span><br><span class="line"><span class="javascript"><span class="keyword">var</span> lsd = builder2.build();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(lsd);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h6 id="ES6代码示例"><a href="#ES6代码示例" class="headerlink" title="ES6代码示例"></a>ES6代码示例</h6><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> studentCount = <span class="number">0</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">	<span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="class"><span class="keyword">class</span> <span class="title">StudentBuilder</span> </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">constructor</span>() &#123;</span></span><br><span class="line"><span class="javascript">    		<span class="keyword">this</span>.student = <span class="keyword">new</span> Student();</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">    	setName(name) &#123;</span></span><br><span class="line"><span class="javascript">        	<span class="keyword">this</span>.student.name = name;</span></span><br><span class="line"><span class="undefined">    	&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    	setGender(gender) &#123;</span></span><br><span class="line"><span class="javascript">        	<span class="keyword">if</span> (gender != <span class="string">'男'</span> &amp;&amp; gender != <span class="string">'女'</span>)</span></span><br><span class="line"><span class="javascript">    		<span class="keyword">throw</span> <span class="string">'好玩不'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">			<span class="keyword">this</span>.student.gender = gender;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    	setHairLength(hairLength) &#123;</span></span><br><span class="line"><span class="javascript">        	<span class="keyword">if</span> (</span></span><br><span class="line"><span class="javascript">    		(<span class="keyword">this</span>.student.gender == <span class="string">'男'</span> &amp;&amp; hairLength &gt; <span class="number">1</span>) ||</span></span><br><span class="line"><span class="javascript">    		(<span class="keyword">this</span>.student.gender == <span class="string">'女'</span> &amp;&amp; hairLength &gt; <span class="number">25</span>)</span></span><br><span class="line"><span class="javascript">			) <span class="keyword">throw</span> <span class="string">'回去剪头'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">			<span class="keyword">this</span>.student.hairLength = hairLength;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    	build() &#123;</span></span><br><span class="line"><span class="undefined">        	studentCount++;</span></span><br><span class="line"><span class="javascript">    		<span class="built_in">console</span>.log(studentCount);</span></span><br><span class="line"><span class="javascript">    		<span class="keyword">return</span> <span class="keyword">this</span>.student;</span></span><br><span class="line"><span class="undefined">		&#125;</span></span><br><span class="line"><span class="undefined">	&#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> builder = <span class="keyword">new</span> StudentBuilder();</span></span><br><span class="line"><span class="javascript">builder.setName(<span class="string">'王花花'</span>);</span></span><br><span class="line"><span class="javascript">builder.setGender(<span class="string">'男'</span>);</span></span><br><span class="line"><span class="undefined">builder.setHairLength(1);</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> whh = builder.build();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> builder2 = <span class="keyword">new</span> StudentBuilder();</span></span><br><span class="line"><span class="javascript">builder2.setName(<span class="string">'李拴蛋'</span>);</span></span><br><span class="line"><span class="javascript">builder2.setGender(<span class="string">'女'</span>);</span></span><br><span class="line"><span class="undefined">builder2.setHairLength(20);</span></span><br><span class="line"><span class="javascript"><span class="keyword">const</span> lsd = builder2.build();</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript"><span class="built_in">console</span>.log(lsd);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="10-构建者模式的应用-创建类模式"><a href="#10-构建者模式的应用-创建类模式" class="headerlink" title="10.构建者模式的应用-创建类模式"></a>10.构建者模式的应用-创建类模式</h5><h5 id="11-最底层的验证器-表单验证可以更灵活"><a href="#11-最底层的验证器-表单验证可以更灵活" class="headerlink" title="11.最底层的验证器-表单验证可以更灵活"></a>11.最底层的验证器-表单验证可以更灵活</h5><h5 id="12-用户表单的抽象-表单验证可以更灵活"><a href="#12-用户表单的抽象-表单验证可以更灵活" class="headerlink" title="12.用户表单的抽象-表单验证可以更灵活"></a>12.用户表单的抽象-表单验证可以更灵活</h5><h5 id="13-错误信息的显示-表单验证可以更灵活"><a href="#13-错误信息的显示-表单验证可以更灵活" class="headerlink" title="13.错误信息的显示-表单验证可以更灵活"></a>13.错误信息的显示-表单验证可以更灵活</h5><h1 id="工厂模式"><a href="#工厂模式" class="headerlink" title="工厂模式"></a>工厂模式</h1><h3 id="”方便创建出不同类型的对象“，“学生：文科-理科”"><a href="#”方便创建出不同类型的对象“，“学生：文科-理科”" class="headerlink" title="”方便创建出不同类型的对象“，“学生：文科/理科”"></a>”方便创建出不同类型的对象“，“学生：文科/理科”</h3><p>在工厂函数里面判断传入的值</p>
<h1 id="抽象工厂模式"><a href="#抽象工厂模式" class="headerlink" title="抽象工厂模式"></a>抽象工厂模式</h1><h3 id="”具体决定调用哪个工厂“-“老师工厂-学生工厂”"><a href="#”具体决定调用哪个工厂“-“老师工厂-学生工厂”" class="headerlink" title="”具体决定调用哪个工厂“- “老师工厂/学生工厂”"></a>”具体决定调用哪个工厂“- “老师工厂/学生工厂”</h3><p>即老师工厂(用于生成老师对象)还是学生工厂(生成学生对象)</p>
<h1 id="单例模式"><a href="#单例模式" class="headerlink" title="单例模式"></a>单例模式</h1><h3 id="”无论怎么new，都只返回一份实例“"><a href="#”无论怎么new，都只返回一份实例“" class="headerlink" title="”无论怎么new，都只返回一份实例“"></a>”无论怎么new，都只返回一份实例“</h3><h1 id="策略模式"><a href="#策略模式" class="headerlink" title="策略模式"></a>策略模式</h1><h1 id="责任链模式"><a href="#责任链模式" class="headerlink" title="责任链模式"></a>责任链模式</h1><h1 id="命令模式"><a href="#命令模式" class="headerlink" title="命令模式"></a>命令模式</h1><h1 id="迭代模式"><a href="#迭代模式" class="headerlink" title="迭代模式"></a>迭代模式</h1><h1 id="代理者模式"><a href="#代理者模式" class="headerlink" title="代理者模式"></a>代理者模式</h1><h1 id="备忘录模式"><a href="#备忘录模式" class="headerlink" title="备忘录模式"></a>备忘录模式</h1><h1 id="观察者模式"><a href="#观察者模式" class="headerlink" title="观察者模式"></a>观察者模式</h1></div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/js/">js</a></li></ul></footer></article><section class="reward"><a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png" title="微信"></div></section><div class="comments" id="v-container"><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>new Valine({
  el: '#v-container',
  appId: 'OBALSfJMkMbTcVCkNihDqCEu-gzGzoHsz',
  appKey: 'mdaD2JiJU4lQHSA0nHNRvJOc',
  avatar: 'retro',
  lang: 'zh-cn',
  placeholder: 'balabala~',
  notify: false,
  verify: false,
  pageSize: 20,
  avatarForce: false,
  visitor: true,
  highlight: true
});</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2019 Eynus.</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>